(function(f){var j=false;f(window).on("beforeunload",function(){if(j&&"nav-menus.php"!==args.changeCheck){return"Are you sure you want to leave?"}});f('textarea, #ca_default_navigation_menu, select, input[type="text"], input[type="checkbox"], input[type="password"] ').change(function(n){j=true});f('input[type="button"]').click(function(n){j=true});f("#caweb-options-form").submit(function(){j=false;this.submit()});f(".caweb-nav-tab").click(function(){var o=document.getElementsByClassName("caweb-nav-tab");var p=this.getAttribute("name");for(var n=0;n<o.length;n++){if(p!==o[n].getAttribute("name")){o[n].classList.remove("nav-tab-active");document.getElementById(o[n].getAttribute("name")).classList.add("hidden")}else{o[n].classList.add("nav-tab-active");document.getElementById(p).classList.remove("hidden")}}document.getElementById("tab_selected").value=p});f("#ca_site_version").change(function(){var t=this.options[this.selectedIndex].value;var o=document.getElementsByClassName("extra");var n=document.getElementsByClassName("base");var u=f("#general table:first tr:nth-child(6)");var v=f("#ca_site_color_scheme")[0];var p=v.options[v.selectedIndex].value;var s=false;for(var r=0;r<o.length;r++){if(t>=5){o[r].classList.remove("hidden");for(var q=0;q<n.length;q++){n[q].classList.add("hidden")}if(!f("#ca_google_search_id").val().trim()){u.addClass("hidden")}else{u.removeClass("hidden")}}else{o[r].classList.add("hidden");if(o[r].value==p&&o[r].classList.contains("extra")){s=true}for(var q=0;q<n.length;q++){n[q].classList.remove("hidden")}}}if(s){for(var r=0;r<v.options.length;r++){if(!v.options[r].classList.contains("extra")){v.selectedIndex=r;break}}}});f("#resetFavIcon").click(function(){var n=args.defaultFavIcon;document.getElementById("ca_fav_ico").value=n;document.getElementById("ca_fav_ico_img").src=n;document.getElementById("ca_fav_ico_filename").value="favicon.ico"});f("#ca_google_search_id").on("input",function(n){var p=f("#general table:first tr:nth-child(6)");var o=f("#ca_site_version option:selected").val();if(!this.value.trim()){p.addClass("hidden")}else{if(5<=o){p.removeClass("hidden")}}});f("#uploadedCSS, #uploadedJS").sortable();f("#uploadedCSS, #uploadedJS").disableSelection();f(".remove-css, .remove-js").click(function(o){o.preventDefault();var n=confirm("Are you sure you want to "+this.title+"? This can not be undone.");if(n==true){j=true;this.parentNode.remove()}});f("#addCSS, #addJS").click(function(n){b(f(this).closest("table"),f(this).attr("name"));j=true});function b(q,p){var n=q.children().children().length;var t=document.createElement("TR");var s=document.createElement("TD");var u=document.createElement("A");var r=document.createElement("TD");var o=document.createElement("Input");t.classList="pending-"+p;u.classList="dashicons dashicons-dismiss remove-"+p;o.type="file";o.name=n+p+"_upload";o.id=n+p+"_upload";o.accept="."+p;u.addEventListener("click",function(w){w.preventDefault();var v=""!==this.title?confirm("Are you sure you want to "+this.title+"? This can not be undone."):true;if(v==true){j=true;this.parentNode.parentNode.remove()}});o.addEventListener("change",function(){var v=this.value.substring(this.value.lastIndexOf("\\")+1);var w=v.lastIndexOf(".")>0?v.substring(v.lastIndexOf(".")+1).toLowerCase():"";if(""===w||p!==w){alert(v+" isn't a valid "+p+" extension and was not uploaded.");this.parentNode.remove()}else{u.title="remove "+v}});r.append(u);r.append(o);t.append(s);t.append(r);q.append(t)}f("#cawebAlerts").sortable();f("#cawebAlerts").disableSelection();f("#addAlertBanner").click(function(s){f("#caweb_alert_count").val(function(u,v){return ++v});var r=f("#cawebAlerts");var n=document.createElement("LI");var p=f("#caweb_alert_count").val();var o=document.createElement("DIV");var t=f("#caweb-alert-settings");var q=document.createElement("DIV");o.classList="caweb-alert";m(o,p);q.id="caweb-alert-"+p;q.style.display="none";g(q,p);n.appendChild(o);r.append(n);t.append(q);wp.editor.initialize("alertmessage"+p,args.tinymce_settings);j=true});f(".caweb-alert div a.alert-toggle").click(function(n){a(this)});f(".removeAlert").click(function(n){c(this)});f(".alert-read-more").click(function(n){i(this)});f(".resetAlertIcon").click(function(n){resetIconSelect(this.parentNode.nextElementSibling,false)});f(".caweb-alert div a.activateAlert").click(function(n){e(this)});f('[class*="caweb-alert-"] .button-primary.ok').click(function(n){h(this)});f('[class*="caweb-alert-"] .button-primary.cancel').click(function(n){l(this)});function e(n){n.classList.toggle("inactive");if(-1<n.className.indexOf("inactive")){n.firstElementChild.value="inactive"}else{n.firstElementChild.value="active"}}function m(n,o){var z=document.createElement("DIV");var v=document.createElement("P");var p=document.createElement("A");var y=document.createElement("A");var s=document.createElement("A");var r=document.createElement("A");var t=document.createElement("INPUT");var x=document.createElement("DIV");var q=document.createElement("INPUT");var w=document.createElement("P");var u=document.createElement("TEXTAREA");v.innerHTML="Label";p.classList="thickbox dashicons dashicons-menu";p.href="#TB_inline?width=600&height=550&modal=true&inlineId=caweb-alert-"+o;y.classList="dashicons dashicons-dismiss removeAlert";y.addEventListener("click",function(A){c(this)});s.classList="dashicons dashicons-arrow-up alert-toggle";s.addEventListener("click",function(A){a(this)});r.classList="dashicons activateAlert";r.addEventListener("click",function(A){e(this)});t.name="alert-status-"+o;t.type="hidden";r.appendChild(t);x.appendChild(q);x.appendChild(w);x.appendChild(u);q.name="alert-header-"+o;q.type="text";q.placeholder="Label";w.innerHTML="Message";u.name="alert-message-"+o;u.id="alertmessage"+o;z.appendChild(v);z.appendChild(y);z.appendChild(p);z.appendChild(s);z.appendChild(r);n.appendChild(z);n.appendChild(x)}function g(D,F){var E=document.createElement("FORM");var O=document.createElement("H3");var z=document.createElement("P");var y=document.createElement("LABEL");var G=document.createElement("INPUT");var w=document.createElement("LABEL");var H=document.createElement("INPUT");var I=document.createElement("P");var x=f("#ca_site_color_scheme")[0];var M=x.options[x.selectedIndex].value;var P=document.createElement("INPUT");var o=document.createElement("P");var v=document.createElement("LABEL");var s=document.createElement("INPUT");var L=document.createElement("DIV");var p=document.createElement("P");var n=document.createElement("INPUT");var J=document.createElement("LABEL");var u=document.createElement("LABEL");var t=document.createElement("LABEL");var K=document.createElement("INPUT");var S=document.createElement("INPUT");var B=document.createElement("P");var C=document.createElement("SPAN");var r=document.createElement("UL");var q=document.createElement("INPUT");var Q=document.createElement("A");var A=document.createElement("A");E.classList="caweb-alert-"+F;O.innerHTML="Alert Settings";z.innerHTML="Display on";G.type="radio";G.name="alert-display-"+F;G.value="home";G.checked=true;y.appendChild(G);y.appendChild(document.createTextNode("Home Page Only"));H.type="radio";H.name="alert-display-"+F;H.value="all";w.appendChild(H);w.appendChild(document.createTextNode("All Pages"));I.innerHTML="Banner Color";P.type="color";P.name="alert-banner-color-"+F;P.value=args.caweb_colors[M]["highlight"];v.innerHTML="Add Read More Button ";s.type="checkbox";s.classList="alert-read-more";s.name="alert-read-more-"+F;s.addEventListener("click",function(T){i(this)});v.appendChild(s);o.appendChild(v);p.innerHTML="Read More Button URL";n.type="text";n.name="alert-read-more-url-"+F;J.innerHTML="Open link in";K.type="radio";K.name="alert-read-more-target-"+F;K.checked=true;K.value="_blank";S.type="radio";S.name="alert-read-more-target-"+F;S.value="";u.appendChild(K);u.appendChild(document.createTextNode("New Tab "));t.appendChild(S);t.appendChild(document.createTextNode("Current Tab"));L.classList="hidden";L.appendChild(p);L.appendChild(n);L.appendChild(J);L.appendChild(u);L.appendChild(t);B.innerHTML="Add Icon ";C.classList="dashicons dashicons-image-rotate resetAlertIcon";C.addEventListener("click",function(T){resetIconSelect(this.parentNode.nextElementSibling,false)});B.appendChild(C);r.id="caweb-icon-menu";r.className="noUpdate";for(var N=0;N<args.caweb_icons.length;N++){var R=document.createElement("LI");R.classList="icon-option ca-gov-icon-"+args.caweb_icons[N];R.title=args.caweb_icons[N];r.appendChild(R)}q.name="alert-icon-"+F;q.type="hidden";r.appendChild(q);Q.className="button button-primary ok";Q.innerHTML="Ok";Q.addEventListener("click",function(T){h(this)});A.className="button button-primary cancel";A.innerHTML="Cancel";A.addEventListener("click",function(T){l(this)});E.appendChild(O);E.appendChild(z);E.appendChild(y);E.appendChild(w);E.appendChild(I);E.appendChild(P);E.appendChild(o);E.appendChild(L);E.appendChild(B);E.appendChild(r);E.appendChild(Q);E.appendChild(A);D.appendChild(E)}function a(n){n.parentNode.nextElementSibling.classList.toggle("hidden");if(n.parentNode.nextElementSibling.classList.contains("hidden")){n.parentNode.firstElementChild.innerHTML=""!==n.parentNode.nextElementSibling.firstElementChild.value.trim()?n.parentNode.nextElementSibling.firstElementChild.value:"Header";n.classList.remove("dashicons-arrow-up");n.classList.add("dashicons-arrow-down")}else{n.parentNode.firstElementChild.innerHTML="Header";n.classList.remove("dashicons-arrow-down");n.classList.add("dashicons-arrow-up")}}function c(o){var n=confirm("Are you sure you want to remove this alert? This can not be undone.");if(n==true){j=true;o.parentNode.parentNode.parentNode.remove()}}function i(n){n.parentNode.parentNode.nextSibling.classList.toggle("hidden")}var d=f("#caweb-alert-settings");function h(t){var o=t.parentNode.className.substring(t.parentNode.className.lastIndexOf("-")+1);var n=t.parentNode.getElementsByTagName("INPUT");var r={};for(var q=0;q<n.length;q++){var p=n[q];if((-1<p.name.indexOf("alert-display-")&&p.checked)||(-1<p.name.indexOf("alert-read-more-target-")&&p.checked)){r[p.name]=p.value}else{if(-1==p.name.indexOf("alert-display-")&&-1==p.name.indexOf("alert-read-more-target-")){if(-1<p.name.indexOf("alert-icon-")){var s=p.parentNode.getElementsByClassName("selected");if(0<s.length){cawebIconSelected(f(s[0])[0],true)}else{p.value=""}}r[p.name]=-1<p.name.indexOf("alert-read-more-")&&-1==p.name.indexOf("alert-read-more-url-")?p.checked:p.value}}}d[o]=r;tb_remove()}function l(u){var o=u.parentNode.className.substring(u.parentNode.className.lastIndexOf("-")+1);var n=u.parentNode.getElementsByTagName("INPUT");for(var t=0;t<n.length;t++){var r=n[t];if((-1<r.name.indexOf("alert-display-")&&"home"==r.value)||(-1<r.name.indexOf("alert-read-more-target-")&&"_blank"==r.value)){r.checked=true}else{if(-1<r.name.indexOf("alert-read-more-")&&"checkbox"==r.type){r.checked=false;r.parentNode.parentNode.nextElementSibling.classList.add("hidden")}else{if(-1<r.name.indexOf("alert-banner-color-")){var q=f("#ca_site_color_scheme")[0];var p=q.options[q.selectedIndex].value;r.value=args.caweb_colors[p]["highlight"]}else{if(-1<r.name.indexOf("alert-icon-")){var s=r.parentNode;resetIconSelect(s,false);if(""!==r.value){f(s).find('[title="'+r.value+'"]')[0].classList.add("selected")}}}}}}tb_remove()}f(".resetGoogleIcon").click(function(n){resetIconSelect(this.parentNode.nextElementSibling.firstElementChild,true)});f('[name="ca_google_trans_enabled"]').click(function(n){if("custom"!==this.value){this.parentNode.parentNode.parentNode.nextElementSibling.classList.add("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.add("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.add("hidden")}else{if("custom"==this.value){this.parentNode.parentNode.parentNode.nextElementSibling.classList.remove("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.remove("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.remove("hidden")}}});f('[name="caweb_options_submit"]').click(function(r){r.preventDefault();var n=f("#caweb-alert-settings").find("INPUT");var q=document.createElement("DIV");this.nextElementSibling.value="on";q.className="hidden";for(var p=0;p<n.length;p++){var o=n[p];if(((-1<o.name.indexOf("alert-display-")||-1<o.name.indexOf("alert-read-more-target-"))&&o.checked)||(-1==o.name.indexOf("alert-display-")&&-1==o.name.indexOf("alert-read-more-target-"))){q.appendChild(n[p])}}f("#caweb-options-form").append(q);f("#caweb-options-form").submit()});f(function(){f(document).on("change","div .unit-size-selector",function(){var p=this.id.substring(this.id.lastIndexOf("-")+1);var r=this.value;var o=document.getElementById("menu-item-settings-"+p);var q=o.getElementsByClassName("media_image")[0];var s=o.getElementsByClassName("field-description")[0];var n=o.getElementsByClassName("icon_selector")[0];if("unit1"!=r){s.classList.remove("hidden-field")}else{s.classList.add("hidden-field")}if("unit3"==r){q.classList.add("show");n.classList.remove("show")}else{q.classList.remove("show");n.classList.add("show")}});f(document).on("click",".icon_selector .caweb-icon-menu li",function(n){this.parentNode.parentNode.firstElementChild.lastElementChild.value=this.title});f(document).on("DOMSubtreeModified","#menu-to-edit",function(q){var n=this.getElementsByClassName("pending");for(var o=0;o<n.length;o++){var p=n.item(o).id.substring(n.item(o).id.lastIndexOf("-")+1);document.getElementById("edit-"+p).addEventListener("click",k)}});f(".item-edit").click(k)});function k(){var w=this.id.substring(this.id.lastIndexOf("-")+1);var s=document.getElementById("menu-item-"+w);var q=s.className;var p=document.getElementById("menu-item-settings-"+w);var t=p.getElementsByClassName("unit-size-selector")[0];var n=t.options[t.selectedIndex].value;var o=p.getElementsByClassName("media_image")[0];var r=p.getElementsByClassName("field-description")[0];var v=p.getElementsByClassName("mega_menu_images")[0];var u=p.getElementsByClassName("icon_selector")[0];if(-1!=q.indexOf("menu-item-depth-0")){v.classList.add("show");u.classList.add("show");o.classList.remove("show");r.classList.add("hidden-field")}else{v.classList.remove("show");t.parentNode.classList.add("show");if("unit1"!=n){r.classList.remove("hidden-field")}else{r.classList.add("hidden-field")}if("unit3"==n){o.classList.add("show")}else{o.classList.remove("show")}}}})(jQuery);